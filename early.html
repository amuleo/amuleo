<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سحرخیزی</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* اعمال فونت وزیرمتن به صورت سراسری */
        body {
            font-family: 'Vazirmatn', sans-serif;
        }
        /* استایل برای آکاردئون */
        .accordion-content {
            max-height: 0;
            opacity: 0;
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
            overflow-y: hidden; /* همیشه پنهان کردن اسکرول */
        }
        .accordion-content.open {
            max-height: 9999px; /* مقدار بسیار بزرگ برای نمایش کامل محتوا بدون اسکرول */
            opacity: 1;
        }
        /* استایل‌های سفارشی برای تم تاریک با استفاده از کلاس dark */
        html.dark body {
            background-image: linear-gradient(to bottom right, #1f2937, #374151); /* gray-900 to gray-700 */
            color: #e5e7eb; /* gray-200 */
        }
        html.dark .bg-white { background-color: #111827; /* gray-900 */ }
        html.dark .border-gray-200 { border-color: #374151; /* gray-700 */ }
        html.dark .bg-gray-50 { background-color: #1f2937; /* gray-800 */ }
        html.dark .text-gray-700 { color: #d1d5db; /* gray-200 */ }
        html.dark .hover\:bg-gray-100:hover { background-color: #374151; /* gray-700 */ }
        html.dark .text-blue-700 { color: #60a5fa; /* blue-400 */ }
        html.dark .text-gray-600 { color: #9ca3af; /* gray-300 */ }
        html.dark .bg-blue-50 { background-color: #1f2937; /* gray-800 */ }
        html.dark .text-blue-600 { color: #60a5fa; /* blue-400 */ }
        html.dark .border-blue-300 { border-color: #4b5563; /* gray-600 */ }
        html.dark .bg-gray-700 { background-color: #374151; /* gray-700 */ }
        html.dark .text-gray-200 { color: #e5e7eb; /* gray-200 */ }
        html.dark .placeholder-gray-400::placeholder { color: #9ca3af; /* gray-400 */ }
        html.dark .hover\:bg-blue-100:hover { background-color: #374151; /* gray-700 */ }
        html.dark .bg-green-100 { background-color: #166534; /* green-900 */ }
        html.dark .text-green-800 { color: #dcfce7; /* green-200 */ }
        html.dark .text-blue-600 { color: #60a5fa; /* blue-400 */ }
        html.dark .bg-purple-50 { background-color: #1f2937; /* gray-800 */ }
        html.dark .text-purple-600 { color: #a78bfa; /* purple-400 */ }
        html.dark .border-purple-200 { border-color: #6d28d9; /* purple-700 */ }
        html.dark .text-gray-500 { color: #9ca3af; /* gray-400 */ }
        html.dark .bg-green-50 { background-color: #1f2937; /* gray-800 */ }
        html.dark .text-green-700 { color: #4ade80; /* green-400 */ }
        html.dark .text-gray-300 { color: #d1d5db; /* gray-300 */ }
        html.dark .text-right { text-align: right; }
        html.dark .text-justify { text-align: justify; }
        html.dark .list-decimal { list-style-type: decimal; }
        html.dark .list-inside { list-style-position: inside; }
        html.dark .flex-row-reverse { flex-direction: row-reverse; }
        html.dark .ml-3 { margin-left: 0.75rem; } /* Equivalent to 12px */
        html.dark .mr-3 { margin-right: 0; } /* Ensure no conflicting margin */

        /* Styles for table in dark mode */
        html.dark table {
            background-color: #1f2937; /* gray-800 */
            border-color: #374151; /* gray-700 */
        }
        html.dark th, html.dark td {
            border-color: #374151; /* gray-700 */
            color: #d1d5db; /* gray-300 */
        }
        html.dark thead tr {
            background-color: #1e3a8a; /* blue-900 */
            color: #bfdbfe; /* blue-200 */
        }
        html.dark tbody tr.bg-gray-50 {
            background-color: #374151; /* gray-700 */
        }

        /* Modal styles */
        .modal {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .modal.open {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #fff;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 500px;
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease-in-out;
        }
        .modal.open .modal-content {
            transform: translateY(0);
        }
        html.dark .modal-content {
            background-color: #1f2937; /* gray-800 */
            color: #e5e7eb; /* gray-200 */
        }
        .close-button {
            position: absolute;
            top: 1rem;
            left: 1rem; /* Changed to left for RTL */
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280; /* gray-500 */
        }
        html.dark .close-button {
            color: #9ca3af; /* gray-400 */
        }
        .modal-button {
            display: block;
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background-color: #6366f1; /* indigo-500 */
            color: white;
            border-radius: 0.375rem;
            text-align: center;
            font-weight: 600;
            transition: background-color 0.2s ease-in-out;
        }
        .modal-button:hover {
            background-color: #4f46e5; /* indigo-600 */
        }
        html.dark .modal-button {
            background-color: #4f46e5; /* indigo-600 */
        }
        html.dark .modal-button:hover {
            background-color: #6366f1; /* indigo-500 */
        }

        /* Custom scrollbar for Webkit browsers */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        html.dark .custom-scrollbar::-webkit-scrollbar-track {
            background: #374151; /* gray-700 */
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        html.dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #9ca3af; /* gray-400 */
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        html.dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* gray-500 */
        }
    </style>
</head>
<body class="min-h-screen p-4 transition-colors duration-300 bg-gradient-to-br from-blue-100 to-purple-200 text-gray-800">
    <div class="max-w-4xl mx-auto bg-white rounded-xl p-6 md:p-8 space-y-8" dir="rtl">
        <div class="flex justify-between mb-4">
            <button id="three-dot-menu-toggle"
                class="p-2 rounded-full bg-gray-200 text-gray-800 hover:scale-105 transition-transform duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 dark:bg-gray-700 dark:text-gray-200" aria-label="Menu">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ellipsis">
                    <circle cx="12" cy="12" r="1" />
                    <circle cx="19" cy="12" r="1" />
                    <circle cx="5" cy="12" r="1" />
                </svg>
            </button>

            <button id="theme-toggle"
                class="p-2 rounded-full bg-gray-200 text-gray-800 hover:scale-105 transition-transform duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 dark:bg-gray-700 dark:text-gray-200 pointer-events-none" aria-label="Toggle theme">
                <svg id="sun-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="lucide lucide-sun">
                    <circle cx="12" cy="12" r="8" />
                    <path d="M12 2v2" />
                    <path d="M12 20v2" />
                    <path d="M4.93 4.93l1.41 1.41" />
                    <path d="M17.66 17.66l1.41 1.41" />
                    <path d="M2 12h2" />
                    <path d="M20 12h2" />
                    <path d="M4.93 19.07l1.41-1.41" />
                    <path d="M17.66 6.34l1.41-1.41" />
                </svg>
                <svg id="moon-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="lucide lucide-moon hidden">
                    <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
                </svg>
            </button>
        </div>

        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-5xl font-extrabold text-blue-700 dark:text-blue-400 mb-2">
                برنامه سحرخیزی
            </h1>
            <p class="text-base md:text-xl text-gray-600 dark:text-gray-300 text-justify">
                اهداف روزانه و نقل قول‌های انگیزشی
            </p>
        </header>

        <section class="bg-purple-50 p-6 rounded-lg dark:bg-gray-800">
            <h2 class="text-2xl md:text-3xl font-bold text-purple-600 dark:text-purple-400 mb-4 text-center">
                پیشرفت سحرخیزی شما
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6">
                <div class="bg-white p-4 rounded-lg shadow-sm dark:bg-gray-700 dark:text-gray-200">
                    <p class="text-lg font-semibold text-justify">امتیازات:</p>
                    <p id="current-points" class="text-3xl font-bold text-blue-600 dark:text-blue-400 text-justify">0</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm dark:bg-gray-700 dark:text-gray-200">
                    <p class="text-lg font-semibold text-justify">سطح:</p>
                    <p id="current-level" class="text-3xl font-bold text-green-600 dark:text-green-400 text-justify">1</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm dark:bg-gray-700 dark:text-gray-200">
                    <p class="text-lg font-semibold text-justify">استریک (روزهای متوالی):</p>
                    <p id="current-streak" class="text-3xl font-bold text-red-600 dark:text-red-400 text-justify">0</p>
                </div>
            </div>

            <div class="mb-4">
                <p class="text-base font-medium text-gray-700 dark:text-gray-300 mb-2 text-right text-justify">
                    پیشرفت به سطح بعدی: <span id="xp-progress-text">0/100</span>
                </p>
                <div class="w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700">
                    <div id="progress-bar" class="bg-blue-500 h-4 rounded-full transition-all duration-500 ease-out" style="width: 0%;"></div>
                </div>
            </div>
        </section>

        <section class="bg-blue-50 p-6 rounded-lg dark:bg-gray-800">
            <h2 class="text-2xl md:text-3xl font-bold text-blue-600 dark:text-blue-400 mb-4 text-center">
                اهداف سحرخیزی
            </h2>
            <div class="mb-6">
                <label for="sleepSetting" class="block text-base md:text-lg font-medium text-gray-700 dark:text-gray-300 mb-2 text-justify">
                    تنظیم خواب (مثال: ساعت بیداری هدف)
                </label>
                <input
                    type="text"
                    id="sleepSetting"
                    placeholder="مثال: ۶:۰۰ صبح"
                    class="w-full p-3 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 text-right dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400 text-base"
                />
            </div>
            <ul id="morning-goals-list" class="space-y-3">
                </ul>
        </section>

        <section class="bg-purple-50 p-6 rounded-lg dark:bg-gray-800">
            <h2 class="text-2xl md:text-3xl font-bold text-purple-600 dark:text-purple-400 mb-4 text-center">
                نقل قول‌ها
            </h2>
            <div id="quotes-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                </div>
        </section>

        <section class="bg-green-50 p-6 rounded-lg dark:bg-gray-800">
            <h2 class="text-2xl md:text-3xl font-bold text-green-700 dark:text-green-400 mb-4 text-center">
                راهنمای جامع مدیریت خواب
            </h2>
            <div id="guide-sections-container">
                </div>
        </section>

        <footer class="text-center text-gray-500 text-sm mt-8 dark:text-gray-400">
            <p class="text-justify">با آرزوی روزی پر از موفقیت و آرامش برای شما.</p>
            <p class="text-justify">تمامی حقوق برای<strong> عمو لئو</strong> محفوظ است.</p>
        </footer>
    </div>

    <div id="three-dot-menu-modal" class="modal">
        <div class="modal-content">
            <button class="close-button" id="close-three-dot-menu">&times;</button>
            <h3 class="text-xl font-bold mb-4 text-center text-justify">منو</h3>
            <button id="show-gamification-rules" class="modal-button">قوانین گیمیفیکیشن</button>
            <button id="show-reset-confirmation" class="modal-button bg-red-500 hover:bg-red-600">بازنشانی داده‌ها</button>
        </div>
    </div>

    <div id="gamification-rules-modal" class="modal">
        <div class="modal-content flex flex-col h-[500px]"> <h3 class="text-xl font-bold mb-4 text-center text-justify">قوانین گیمیفیکیشن</h3>
            <div class="text-base text-right text-justify space-y-3 flex-grow overflow-y-auto custom-scrollbar"> <p class="text-justify"><strong>امتیازات:</strong> با تکمیل هر هدف، ۱۰ امتیاز کسب می‌کنید.</p>
                <p class="text-justify"><strong>سطح‌بندی:</strong> برای ارتقاء سطح، باید امتیازات مشخصی کسب کنید:</p>
                <ul class="list-decimal list-inside mr-4">
                    <li class="text-justify">سطح ۱ (تازه کار): ۰ امتیاز</li>
                    <li class="text-justify">سطح ۲ (آماتور): ۱۰۰ امتیاز</li>
                    <li class="text-justify">سطح ۳ (پویا): ۲۵۰ امتیاز</li>
                    <li class="text-justify">سطح ۴ (متعهد): ۴۰۰ امتیاز</li>
                    <li class="text-justify">سطح ۵ (پیشرو): ۶۰۰ امتیاز</li>
                    <li class="text-justify">سطح ۶ (استاد): ۸۵۰ امتیاز</li>
                    <li class="text-justify">سطح ۷ (قهرمان): ۱۱۰۰ امتیاز</li>
                    <li class="text-justify">سطح ۸ (افسانه): ۱۳۰۰ امتیاز</li>
                    <li class="text-justify">سطح ۹ (اسطوره): ۱۴۵۰ امتیاز</li>
                    <li class="text-justify">سطح ۱۰ (سحرخیز اعظم): ۱۵۰۰ امتیاز</li>
                </ul>
                <p class="text-justify"><strong>استریک (روزهای متوالی):</strong> برای حفظ استریک، باید حداقل <strong>۵ هدف</strong> را در هر روز تکمیل کنید.</p>
                <p class="text-justify">اگر یک روز را از دست بدهید و کمتر از ۵ هدف را تکمیل کنید، استریک شما صفر می‌شود.</p>
            </div>
            <button class="modal-button mt-4" id="close-gamification-rules">بستن</button> </div>
    </div>

    <div id="reset-confirmation-modal" class="modal">
        <div class="modal-content">
            <button class="close-button" id="close-reset-confirmation">&times;</button>
            <h3 class="text-xl font-bold mb-4 text-center text-justify">بازنشانی داده‌ها</h3>
            <p class="mb-4 text-center text-justify">آیا مطمئن هستید که می‌خواهید تمام داده‌های خود را بازنشانی کنید؟ این عمل غیرقابل بازگشت است.</p>
            <p class="mb-2 text-center text-justify">برای تأیید، کلمه <strong>"تأیید"</strong> را در کادر زیر بنویسید:</p>
            <input type="text" id="confirmation-input" placeholder="تأیید" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 text-center dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400 text-base mb-4" dir="rtl" />
            <p id="reset-error-message" class="text-red-500 text-sm text-center mb-4 hidden text-justify">کلمه تأیید اشتباه است.</p>
            <div class="flex justify-around gap-4">
                <button id="confirm-reset" class="modal-button bg-red-500 hover:bg-red-600 flex-1">تأیید بازنشانی</button>
                <button id="cancel-reset" class="modal-button bg-gray-500 hover:bg-gray-600 flex-1">لغو</button>
            </div>
        </div>
    </div>

    <script>
        // تعریف داده‌های اولیه
        let sleepSetting = '';
        let morningGoals = [
            { id: 1, text: 'بیدار شدن در زمان مشخص (تنظیم خواب)', completed: false, lastCompletionDate: null },
            { id: 2, text: 'نوشیدن یک لیوان آب بلافاصله پس از بیداری', completed: false, lastCompletionDate: null },
            { id: 3, text: 'انجام ۵ دقیقه حرکات کششی یا نرمش سبک', completed: false, lastCompletionDate: null },
            { id: 4, text: 'مدیتیشن یا تمرکز بر تنفس به مدت ۱۰ دقیقه', completed: false, lastCompletionDate: null },
            { id: 5, text: 'نوشتن سه چیزی که بابت آن‌ها شکرگزار هستید', completed: false, lastCompletionDate: null },
            { id: 6, text: 'برنامه‌ریزی برای سه کار مهم روز', completed: false, lastCompletionDate: null },
            { id: 7, text: 'خواندن ۱۰ دقیقه از یک کتاب الهام‌بخش', completed: false, lastCompletionDate: null },
            { id: 8, text: 'گوش دادن به موسیقی آرامش‌بخش', completed: false, lastCompletionDate: null },
            { id: 9, text: 'مرور اهداف بلندمدت', completed: false, lastCompletionDate: null },
            { id: 10, text: 'لبخند زدن به خود در آینه', completed: false, lastCompletionDate: null },
        ];

        // داده‌های گیمیفیکیشن
        let points = 0;
        let level = 1;
        let streak = 0; // تعداد روزهای متوالی که اهداف کافی تکمیل شده‌اند
        let lastAllGoalsCompletionDate = null; // آخرین تاریخی که تعداد کافی از اهداف تکمیل شده‌اند

        const pointsPerGoal = 10;
        // تعریف سطوح و امتیازات مورد نیاز برای هر سطح
        const levelsConfig = [
            { level: 1, xpNeeded: 0, name: "تازه کار" }, // Beginner
            { level: 2, xpNeeded: 100, name: "آماتور" }, // Amateur
            { level: 3, xpNeeded: 250, name: "پویا" }, // Dynamic
            { level: 4, xpNeeded: 400, name: "متعهد" }, // Committed
            { level: 5, xpNeeded: 600, name: "پیشرو" }, // Pioneer
            { level: 6, xpNeeded: 850, name: "استاد" }, // Master
            { level: 7, xpNeeded: 1100, name: "قهرمان" }, // Champion
            { level: 8, xpNeeded: 1300, name: "افسانه" }, // Legend
            { level: 9, xpNeeded: 1450, name: "اسطوره" }, // Myth
            { level: 10, xpNeeded: 1500, name: "سحرخیز اعظم" } // Grand Early Riser
        ];

        const quotes = [
            "تنها راه انجام کارهای بزرگ، دوست داشتن کاری است که انجام می‌دهید. - استیو جابز",
            "شادی به دست آوردن آنچه می‌خواهید نیست، بلکه خواستن آنچه به دست آورده‌اید است. - دالایی لاما",
            "ذهن شما همه چیز است. آنچه فکر می‌کنید، همان می‌شوید. - بودا",
            "موفقیت نهایی نیست، شکست کشنده نیست: این شجاعت ادامه دادن است که اهمیت دارد. - وینستون چرچیل",
            "اگر می‌خواهید زندگی شادتری داشته باشید، آن را به یک هدف گره بزنید، نه به افراد یا اشیا. - آلبرت اینشتین",
            "ما به وسیله آنچه هستیم شکل می‌گیریم، نه آنچه می‌گوییم. - استفان کاوی",
            "بزرگترین افتخار در زندگی هرگز زمین نخوردن نیست، بلکه هر بار که زمین می‌خوریم، برخاستن است. - نلسون ماندلا",
            "آینده متعلق به کسانی است که به زیبایی رویاهای خود ایمان دارند. - النور روزولت",
            "تغییر دردناک است، اما هیچ چیز به اندازه درجا زدن دردناک نیست. - ماندلا",
            "آنچه در ذهن خود پرورش می‌دهید، در زندگی خود برداشت می‌کنید. - جیم ران",
            "هرگز برای شروع دوباره دیر نیست. هرگز برای شاد بودن دیر نیست. - جین فوندا",
            "شما نمی‌توانید اقیانوس را عبور کنید مگر اینکه شجاعت از دست دادن دید ساحل را داشته باشید. - کریستوفر کلمب",
            "باور کنید که می‌توانید و نیمی از راه را رفته‌اید. - تئودور روزولت",
            "راز پیشرفت، شروع کردن است. - مارک تواین",
            "زندگی ۱۰ درصد اتفاقاتی است که برای شما می‌افتد و ۹۰ درصد نحوه واکنش شما به آن است. - چارلز آر. سوئیندول",
        ];

        // محتوای راهنمای جامع مدیریت خواب و نشخوار فکری
        const guideSections = [
            {
                title: "مقدمه: درک چالش خواب و نشخوار فکری",
                content: `
                    <p class="mb-2 text-base text-right text-justify">بسیاری از افراد، ارتباط عمیقی بین افکار و الگوی خواب خود تجربه می‌کنند. اختلال وسواس فکری-عملی (OCD) اغلب شامل افکار مزاحم و تکراری (وسواس‌ها) است که اضطراب قابل توجهی ایجاد می‌کنند و به دنبال آن اعمال تکراری یا تشریفات ذهنی (اجبارها) برای کاهش این پریشانی انجام می‌شود. یکی از تشریفات ذهنی رایج، به ویژه برای افراد دارای OCD، نشخوار فکری است. این پدیده صرفاً یک تفکر عادی نیست؛ بلکه چرخه‌ای از بازپخش مداوم افکار منفی، رویدادهای گذشته، یا نگرانی‌ها در مورد آینده است، بدون اینکه به راه‌حلی منجر شود. این وضعیت شبیه به گیر افتادن ذهن در یک حلقه تکراری است که بی‌وقفه در حال تحلیل و پرسش‌گری است.</p>
                    <p class="mb-2 text-base text-right text-justify">تجربیات کاربران به وضوح این احساس را تأیید می‌کند. برخی از افراد بیان می‌کنند که "همش فکرای مردنو مریضی دارم" یا "مدام ذهنم درگیر مدام در حال فکر کردن گاهی وقتا قشنگ احساس میکنم ک مغزم داره از این همه فکر میترکه". یکی دیگر از کاربران تجربه بسیار مرتبطی را به اشتراک گذاشته است که نیاز به انجام تشریفات خاص قبل از خواب دارد، مانند ایستادن روی نوک پا و حبس نفس، با این باور که "شبا قبل خواب باید مثلا چند بار رو پنجه پام وایسم دستمو بالا بگیرم نفسمو حبس کنم وگرنه اتفاق بدی میفته برام". این فعالیت ذهنی مداوم و نیاز به انجام اجبارها, آرام کردن ذهن و به خواب رفتن را به شدت دشوار می‌سازد.</p>
                    <p class="mb-2 text-base text-right text-justify">این بار ذهنی به طور مستقیم بر خواب تأثیر می‌گذارد. نشخوار فکری می‌تواند اضطراب را تشدید کرده و مشکلات خواب قابل توجهی ایجاد کند. خود OCD نیز می‌تواند چرخه طبیعی خواب را مختل کند و منجر به استرس قبل از رفتن به رختخواب و حتی ترس هنگام بیدار شدن از خواب شود که به مرور زمان می‌تواند به احساس افسردگی کمک کند. این وضعیت یک چرخه معیوب را شکل می‌دهد که در آن وسواس فکری، نشخوار فکری و اختلال خواب به یکدیگر دامن می‌زنند. وسواس فکری و نشخوار فکری مانع از خواب آرام می‌شوند و کمبود خواب متعاقباً اضطراب و نشخوار فکری را تشدید می‌کند. بنابراین، الگوی خواب نامنظم فعلی نه تنها یک عادت نامناسب، بلکه نشانه‌ای ریشه‌دار از این چرخه خودتداوم‌بخش است. هر راهبرد مؤثری باید هر دو عنصر را به طور همزمان مورد توجه قرار دهد.</p>
                `
            },
            {
                title: "چرا تغییر ساعت خواب مهم است؟",
                content: `
                    <p class="mb-2 text-base text-right text-justify">تغییر ساعت خواب یک هدف اساسی است. این تغییر صرفاً به معنای زودتر بیدار شدن نیست؛ بلکه به معنای همگام‌سازی مجدد ساعت طبیعی بدن، که به عنوان ریتم شبانه‌روزی شناخته می‌شود، است. این ساعت داخلی به بدن فرمان می‌دهد که چه زمانی هوشیار باشد و چه زمانی استراحت کند. زمانی که این ریتم از هم گسیخته می‌شود، مشکلات خواب قابل توجهی از جمله بی‌خوابی ایجاد می‌شود.</p>
                    <p class="mb-2 text-base text-right text-justify">بسیاری از افراد از سحرخیزی فواید بی‌شماری را تجربه کرده‌اند. این عادت اغلب با افزایش شادی، بهبود سلامت و بهره‌وری بالاتر مرتبط است. تحقیقات همچنین نشان می‌دهد که سحرخیزی می‌تواند استرس و اضطراب را کاهش دهد و حتی خطر افسردگی را پایین بیاورد، که بخشی از آن به دلیل افزایش سطح سروتونین، هورمون شادی، است. افراد موفق، مانند تیم کوک، مدیرعامل اپل، به دلیل سحرخیزی خود شناخته شده‌اند و از این زمان آرام برای کار متمرکز و برنامه‌ریزی استفاده می‌کنند.</p>
                    <p class="mb-2 text-base text-right text-justify">در مقابل، خواب کمتر از ۷-۹ ساعت توصیه شده برای بزرگسالان می‌تواند عملکرد طبیعی بدن را مختل کرده و توانایی ذهنی را کاهش دهد. این وضعیت می‌تواند منجر به کاهش تمرکز، احساس افسردگی و حتی تجمع مواد سمی در بدن شود. برای دانش‌آموزان، دیر خوابیدن و دیر بیدار شدن می‌تواند احساس عقب‌ماندگی ایجاد کرده، استرس را افزایش داده و بازدهی مطالعه را کاهش دهد.</p>
                    <p class="mb-2 text-base text-right text-justify">تنظیم ریتم شبانه‌روزی به عنوان یک عنصر بنیادی برای سلامت روان عمل می‌کند. زمان‌های ثابت خواب و بیداری برای تنظیم ریتم شبانه‌روزی بدن حیاتی هستند. اختلال در این ریتم منجر به مشکلات خواب قابل توجهی می‌شود. فراتر از خواب، ریتم شبانه‌روزی نقش مهمی در جنبه‌های مختلف سلامت جسمی و روانی ایفا می‌کند. به طور خاص، سحرخیزی، که نتیجه مستقیم یک ریتم شبانه‌روزی تنظیم‌شده است، با کاهش استرس، اضطراب و افسردگی و افزایش سطح سروتونین مرتبط است. این نشان می‌دهد که ایجاد یک برنامه خواب پایدار، به ویژه تغییر به زمان بیداری زودتر، صرفاً یک تنظیم رفتاری نیست، بلکه یک مداخله فیزیولوژیکی است. با هماهنگ‌سازی ساعت داخلی بدن، یک محیط نوروشیمیایی پایدارتر ایجاد می‌شود که می‌تواند به طور عمیقی تنظیم هیجانی را بهبود بخشد و شدت افکار مزاحم و اضطراب مرتبط با OCD و نشخوار فکری را کاهش دهد. این یک گام پیشگیرانه در جهت ساختن تاب‌آوری ذهنی است.</p>
                    <p class="text-base text-right text-justify">علاوه بر این، سحرخیزی یک مزیت روان‌شناختی برای افراد دارای وسواس فکری و نشخوار فکری فراهم می‌کند. دیر بیدار شدن منجر به احساس عقب‌ماندگی و افزایش استرس می‌شود. در مقابل، سحرخیزی با احساس موفقیت، افزایش اعتماد به نفس و ذهنیت "برنده بودن" همراه است. افرادی که با OCD و نشخوار فکری دست و پنجه نرم می‌کنند، اغلب با مسائلی مانند سرزنش خود، عزت نفس پایین و کمال‌گرایی مواجه هستند. احساس "ناکافی بودن" یا "همیشه کمبود وقت داشتن" می‌تواند چرخه‌های نشخوار فکری را به طور قابل توجهی تشدید کند. با موفقیت در پذیرش زمان بیداری زودتر، فرد می‌تواند به طور مداوم یک "پیروزی کوچک" را در همان ابتدای روز خود به دست آورد. این حس فوری کنترل و موفقیت می‌تواند مستقیماً با خودپنداره‌های منفی و اضطراب‌هایی که نشخوار فکری و OCD را تغذیه می‌کنند، مقابله کند و اثباتی ملموس از خودکارآمدی ارائه دهد. بنابراین، سحرخیزی برای فردی با OCD و نشخوار فکری فقط یک عادت فیزیکی نیست؛ بلکه یک ابزار روان‌شناختی قدرتمند است که به بازتعریف روایت شخصی از مبارزه و تأخیر به سمت دستاورد فعال و کنترل کمک می‌کند و در نتیجه بار ذهنی را کاهش داده و محیط داخلی مثبت‌تری را پرورش می‌دهد.</p>
                `
            },
            {
                title: "گام‌های عملی برای تنظیم تدریجی ساعت خواب",
                content: `
                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">تجربه کاربران در تغییر زمان بیداری</h3>
                    <p class="mb-2 text-base text-right text-justify">کلید تغییر برنامه خواب، به ویژه از ۲ بامداد به ۶ صبح، انجام تدریجی آن است. این کار مانند تنظیم یک ابزار ظریف است. بسیاری از کاربران و متخصصان بر این رویکرد تأکید دارند. به جای یک جهش ناگهانی، هدف باید تغییرات کوچک و قابل مدیریت باشد.</p>
                    <p class="mb-2 text-base text-right text-justify">تغییرات کوچک و تدریجی، مقاومت ذهنی را از بین می‌برد. منابع متعدد به شدت تغییرات تدریجی (۱۵ تا ۳۰ دقیقه زودتر) را برای تنظیم خواب توصیه می‌کنند. کاربران به صراحت اذعان می‌کنند که بدن و ذهن در برابر تغییرات ناگهانی "مقاومت" خواهند کرد. برای فردی با OCD، که اغلب اضطراب بالایی در مورد تغییر و تمایلات کمال‌گرایانه را تجربه می‌کند، یک تغییر شدید می‌تواند ترس شدید از شکست یا افزایش اجبارها را تحریک کند. با این حال، تغییرات تدریجی، این تهدید درک شده را کاهش می‌دهند و اعتماد به نفس را از طریق موفقیت‌های کوچک و مداوم ایجاد می‌کنند. با کمتر ترسناک کردن تغییر، احتمال اینکه فرد اضطراب و انعطاف‌ناپذیری ذهنی را تجربه کند که می‌تواند تلاش‌های او را مختل کند، کاهش می‌یابد. هر تغییر کوچک و موفقیت‌آمیز به عنوان یک تقویت‌کننده مثبت عمل می‌کند و به آرامی مغز را برای پذیرش برنامه جدید بدون تحریک واکنش "جنگ یا گریز" مرتبط با وضعیت فرد، بازبرنامه‌ریزی می‌کند. این نه تنها یک توصیه عمومی برای بهداشت خواب است، بلکه یک راهبرد روان‌شناختی حیاتی است که برای افراد دارای OCD طراحی شده است. این راهبرد از اصل "عادت‌های کوچک" برای مدیریت مقاومت و اضطراب ذاتی استفاده می‌کند و مسیر رسیدن به الگوی خواب جدید را قابل دستیابی و پایدار می‌سازد تا اینکه طاقت‌فرسا به نظر برسد.</p>
                    <p class="mb-2 text-base text-right text-justify">یک کاربر توصیه بسیار عملی را به اشتراک گذاشته است: "اگر روز ده صبح بیدار می شدید از فردا سعی کنید ربع ساعت زودتر بیدار بشوید یعنی یک ربع به ده صبح بیدار بشوید البته با حس و حال خوب و با شکرگزاری یک روند را ممکن است تا یک هفته و یا حتی بیشتر هم ادامه بدهید". این رویکرد ملایم به بدن و ذهن کمک می‌کند تا بدون احساس فشار زیاد، سازگار شوند. کاربر دیگری بر مقاومت اولیه تأکید کرد: "قطعا چون شبش کم خوابیدی بدنت مقاومت می کنه ولی باید به زور بیدار بشی"، که نشان می‌دهد در ابتدا، کمی اراده برای غلبه بر الگوهای قدیمی لازم است. این "اجبار" اولیه در فاز اولیه تغییر بسیار قدرتمند است. در حالی که تدریجی بودن کلیدی است، تجربه یک کاربر نشان می‌دهد که در مراحل اولیه، مقداری "اجبار" برای بیدار شدن در زمان جدید و کمی زودتر ضروری است. برای فردی با OCD، شکستن یک الگوی عمیقاً ریشه‌دار (مانند خواب دیرهنگام ناشی از نشخوار فکری) اغلب نیاز به یک فشار اولیه و آگاهانه در برابر تمایل درونی به ماندن در رختخواب یا نشخوار فکری دارد. "مقاومت" ذکر شده در [16] و [19] دقیقاً همین مانع ذهنی است. با پایبندی مداوم به زمان بیداری جدید و کمی زودتر، حتی در صورت خستگی، ریتم شبانه‌روزی بدن یک نشانه خارجی قوی و ثابت دریافت می‌کند. این سیگنال خارجی ثابت به تدریج بر بی‌نظمی داخلی ناشی از نشخوار فکری و الگوهای خواب نامنظم گذشته غلبه می‌کند و به بازآموزی ساعت بیولوژیکی کمک می‌کند. این "اجبار" اولیه، هنگامی که به صورت تدریجی و در گام‌های کوچک اعمال شود، به عنوان یک مداخله رفتاری قدرتمند عمل می‌کند. این به معنای ایجاد یک "اجبار" جدید و سالم‌تر – پایبندی منظم به برنامه بیداری – برای جایگزینی تدریجی الگوهای ذهنی و رفتاری ناسالم است که به خواب دیرهنگام کمک می‌کنند. این یک راه برای بازبرنامه‌ریزی فعال ساعت داخلی و به تبع آن، الگوهای ذهنی است.</p>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">جدول: برنامه گام به گام تنظیم ساعت خواب</h3>
                    <div class="overflow-x-auto mb-4 rounded-lg"> <table class="min-w-full bg-white border border-gray-200 dark:bg-gray-800 dark:border-gray-700">
                            <thead>
                                <tr class="bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                                    <th class="py-2 px-4 border-b text-right dark:border-gray-700 text-sm md:text-base text-justify">هفته/مرحله</th>
                                    <th class="py-2 px-4 border-b text-right dark:border-gray-700 text-sm md:text-base text-justify">هدف زمان خواب (مثال)</th>
                                    <th class="py-2 px-4 border-b text-right dark:border-gray-700 text-sm md:text-base text-justify">هدف زمان بیداری (مثال)</th>
                                    <th class="py-2 px-4 border-b text-right dark:border-gray-700 text-sm md:text-base text-justify">میزان تغییر</th>
                                    <th class="py-2 px-4 border-b text-right dark:border-gray-700 text-sm md:text-base text-justify">نکات کلیدی</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">**شروع**</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۲:۰۰ بامداد</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۹:۰۰ صبح</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">-</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">نقطه شروع فعلی</td>
                                </tr>
                                <tr class="bg-gray-50 dark:bg-gray-700">
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">**هفته ۱**</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱:۴۵ بامداد</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۸:۴۵ صبح</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱۵ دقیقه زودتر</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">هر روز، حتی تعطیلات، به این زمان پایبند باشید. آلارم را دور از دسترس بگذارید.</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">**هفته ۲**</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱:۳۰ بامداد</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۸:۳۰ صبح</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱۵ دقیقه زودتر</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">به محض بیدار شدن، از تخت بیرون بیایید.</td>
                                </tr>
                                <tr class="bg-gray-50 dark:bg-gray-700">
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">**هفته ۳**</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱:۱۵ بامداد</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۸:۱۵ صبح</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱۵ دقیقه زودتر</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">صبحانه را حذف نکنید.</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">**هفته ۴**</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱:۰۰ بامداد</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۸:۰۰ صبح</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱۵ دقیقه زودتر</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">در طول روز از نور طبیعی خورشید بهره ببرید.</td>
                                </tr>
                                <tr class="bg-gray-50 dark:bg-gray-700">
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">**هفته ۵**</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱۲:۴۵ بامداد</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۷:۴۵ صبح</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱۵ دقیقه زودتر</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">به تدریج به هدف ۶ صبح نزدیک شوید.</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">**هفته ۶**</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱۲:۳۰ بامداد</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۷:۳۰ صبح</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">۱۵ دقیقه زودتر</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">در صورت عدم موفقیت، به مرحله قبل بازگردید و تمرین کنید.</td>
                                </tr>
                                <tr class="bg-gray-50 dark:bg-gray-700">
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify">**... ادامه تا رسیدن به هدف ۶ صبح...**</td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify"></td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify"></td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify"></td>
                                    <td class="py-2 px-4 border-b dark:border-gray-700 dark:text-gray-300 text-sm md:text-base text-justify"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">اهمیت ثبات، حتی در تعطیلات</h3>
                    <p class="mb-2 text-base text-right text-justify">یکی از بزرگترین موانع در تنظیم خواب، رها کردن برنامه در تعطیلات است. برای کالیبره شدن واقعی ساعت داخلی بدن، ثبات از اهمیت بالایی برخوردار است. "نکته مهم اینجاست که به جای خودِ ساعت، باید توجه‌تان را روی ثبات بگذارید! این یعنی هر شب سر ساعت مشخصی به خواب رفته و صبح‌ها سر ساعت مشخصی بیدار شوید". این توصیه توسط بسیاری تکرار شده است: "این برنامه را هر روز حتی آخر هفته ها دنبال کنید" و "هر شب حتی در روزهای تعطیل در یک ساعت مشخص به رختخواب بروید و صبح‌ها هم در یک ساعت مشخص از خواب بیدار شوید". پایبندی به برنامه جدید، حتی در روزهای تعطیل، ریتم جدید را تقویت می‌کند و از "جت لگ اجتماعی" جلوگیری می‌کند که می‌تواند تلاش‌های انجام شده را از بین ببرد.</p>
                    <p class="text-base text-right text-justify">این ثبات به عنوان یک لنگر برای ریتم شبانه‌روزی عمل می‌کند. اهمیت زمان‌های ثابت خواب و بیداری در چندین منبع به طور مکرر تأکید شده است. این ثبات به وضوح به آخر هفته‌ها نیز تعیم داده می‌شود. ساعت اصلی بدن (هسته سوپراکیاسماتیک یا SCN در هیپوتالاموس) به نشانه‌های منظم، به ویژه نور و زمان‌بندی ثابت، بسیار حساس است. "خوابیدن بیشتر" در آخر هفته‌ها (خوابیدن به طور قابل توجهی دیرتر از حد معمول) این ریتم ظریف را مختل می‌کند و اساساً یک "جت لگ" کوچک در منطقه زمانی خود فرد ایجاد می‌کند. با حفظ ثبات، حتی در آخر هفته‌ها، یک لنگر قوی و ثابت برای ریتم شبانه‌روزی فراهم می‌شود. این کار از "عدم همگام‌سازی" جلوگیری می‌کند که می‌تواند نوسانات خلقی، عملکرد شناختی و اضطراب کلی را تشدید کند، که همگی چالش‌هایی برای فرد دارای OCD هستند. برای فردی که با OCD و نشخوار فکری دست و پنجه نرم می‌کند، که ثبات ذهنی و عاطفی در آن بسیار مهم است، یک ریتم شبانه‌روزی پایدار یک پایه فیزیولوژیکی اساسی فراهم می‌کند. این به معنای ایجاد یک محیط بیولوژژیکی قابل پیش‌بینی است که از تنظیم هیجانی بهبود یافته حمایت می‌کند و آسیب‌پذیری فیزیولوژیکی در برابر اضطراب و افکار مزاحم را کاهش می‌دهد. این ثبات یک "داربست" داخلی قوی‌تر برای سلامت روان ایجاد می‌کند.</p>
                `
            },
            {
                title: "ایجاد روتین شبانه برای آماده‌سازی ذهن و بدن",
                content: `
                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">فعالیت‌های آرامش‌بخش قبل از خواب</h3>
                    <p class="mb-2 text-base text-right text-justify">ذهن، به ویژه قبل از خواب، بسیار فعال است. ایجاد یک روال ثابت و آرامش‌بخش به مغز و بدن کمک می‌کند تا سیگنال دریافت کنند که زمان استراحت فرا رسیده است. این به معنای قطع فعالانه چرخه نشخوار فکری است. بسیاری از کاربران با فعالیت‌های آرامش‌بخش به موفقیت رسیده‌اند. یک روال آرامش‌بخش عصرگاهی می‌تواند شامل حمام یا دوش آب گرم، خواندن یک کتاب چاپی، یا گوش دادن به موسیقی آرام یا کتاب‌های صوتی باشد. مدیتیشن و یوگای سبک نیز برای آرامش و کاهش استرس بسیار توصیه می‌شوند. تمرینات تنفس عمیق (مانند تکنیک ۴-۷-۸: ۴ ثانیه دم، ۷ ثانیه نگه داشتن نفس، ۸ ثانیه بازدم) می‌تواند به طور قابل توجهی تنش و اضطراب را کاهش دهد. آرام‌سازی پیشرونده عضلانی، که در آن گروه‌های مختلف عضلانی را منقبض و سپس رها می‌کنید، نیز می‌تواند بسیار مؤثر باشد. برخی نیز نوشیدنی‌های گرم و بدون کافئین مانند چای بابونه یا شیر گرم را مفید می‌دانند.</p>
                    <p class="mb-2 text-base text-right text-justify">این فعالیت‌ها به طور فعال چرخه نشخوار فکری را مختل می‌کنند. نشخوار فکری اغلب زمانی تشدید می‌شود که ذهن بیکار است، به ویژه در شب که حواس‌پرتی‌های بیرونی حداقل هستند. درگیر شدن در فعالیت‌های ساختارمند و آرامش‌بخش مانند مطالعه، گوش دادن به موسیقی یا مدیتیشن به عنوان حواس‌پرتی‌های سازنده عمل می‌کنند و به طور فعال فضای ذهنی را که نشخوار فکری معمولاً اشغال می‌کند، جایگزین می‌کنند. این فعالیت‌ها تمرکز فرد را از الگوهای فکری درونی، منفی و چرخه‌ای به ورودی‌های حسی یا روایت‌های بیرونی، آرامش‌بخش و خطی تغییر می‌دهند. این تغییر عمدی توجه، یک مداخله رفتاری است که مستقیماً با عادت نشخوار فکری رقابت کرده و آن را تضعیف می‌کند. این فقط در مورد آرامش نیست؛ بلکه یک روش استراتژیک و پیشگیرانه برای شکستن "اجبار ذهنی" نشخوار فکری از طریق ایجاد یک زنجیره رفتاری جدید و سالم‌تر است. این روال جدید به مغز سیگنال می‌دهد که زمان استراحت فرا رسیده است و به طور مؤثر کنترل محیط ذهنی را به دست می‌گیرد و از شروع چرخه‌های فکری اضطراب‌آور قبل از خواب جلوگیری می‌کند.</p>
                    <p class="text-base text-right text-justify">علاوه بر این، این فعالیت‌ها بدن را از نظر فیزیولوژیکی برای خواب آماده می‌کنند. توصیه‌ها شامل حمام/دوش آب گرم و تمرینات تنفس عمیق است. حمام گرم ابتدا دمای بدن را بالا می‌برد و سپس با اثر خنک‌کنندگی همراه است که یک سیگنال طبیعی برای شروع خواب است. تکنیک‌های تنفس عمیق مستقیماً سیستم عصبی پاراسمپاتیک را فعال می‌کنند و منجر به کاهش تنش عضلانی، فشار خون و ضربان قلب می‌شوند، در نتیجه با تحریک فیزیولوژیکی (استرس و آدرنالین) که اغلب همراه با اضطراب و نشخوار فکری است، مقابله می‌کنند. این فعالیت‌ها مستقیماً بر وضعیت فیزیولوژیکی بدن تأثیر می‌گذارند و آن را از حالت هوشیار، مضطرب یا بیش‌برانگیخته (که اغلب مشخصه OCD و نشخوار فکری است) به حالت آرام و آرامش‌بخش که برای خواب مساعد است، تغییر می‌دهند. این ارتباط حیاتی ذهن و بدن را برجسته می‌کند. با آماده‌سازی فیزیکی بدن برای خواب و کاهش تحریک فیزیولوژیکی، می‌توان شدت فعالیت ذهنی و افکار اضطراب‌آور را به طور غیرمستقیم کاهش داد و به ذهن کمک کرد تا راحت‌تر از نشخوار فکری جدا شود.</p>
                `
            },
            {
                title: "پرهیز از محرک‌ها",
                content: `
                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">پرهیز از محرک‌ها</h3>
                    <p class="mb-2 text-base text-right text-justify">همانطور که به دنبال آرامش هستید، باید از هر چیزی که ذهن یا بدن را بیش از حد نزدیک به زمان خواب تحریک می‌کند، اجتناب کنید. این شامل خارج کردن دستگاه‌های الکترونیکی مانند تلویزیون، کامپیوتر و تلفن‌های هوشمند از اتاق خواب است. نور آبی صفحه نمایش می‌تواند خواب را مختل کند و درگیر شدن با محتوا ذهن را فعال نگه می‌دارد. هدف این است که حداقل یک ساعت قبل از خواب همه صفحه‌های نمایش را کنار بگذارید. همچنین، به آنچه مصرف می‌کنید توجه داشته باشید. از وعده‌های غذایی سنگیل، کافئین (قهوه، چای، نوشیدنی‌های انرژی‌زا) و الکل قبل از خواب اجتناب کنید. در حالی که الکل ممکن است در ابتدا احساس خواب‌آلودگی ایجاد کند، اغلب منجر به خواب مختل شده در اواخر شب می‌شود. غذاهای سنگیل یا تند می‌توانند باعث سوءهاضمه شوند که قطعاً به آرامش کمک نمی‌کند. سعی کنید شام خود را ۲-۳ ساعت قبل از خواب میل کنید.</p>
                    <p class="text-base text-right text-justify">پرهیز از محرک‌ها به محافظت از "پناهگاه خواب" در برابر تحریک شناختی کمک می‌کند. توصیه‌هایی برای حذف دستگاه‌های الکترونیکی از اتاق خواب و اجتناب از زمان استفاده از صفحه نمایش حداقل یک ساعت قبل از خواب، ثابت هستند. فراتر از سرکوب ملاتونین توسط نور آبی، مسئله اصلی برای فرد دارای OCD/نشخوار فکری، *تحریک شناختی* ناشی از درگیر شدن با محتوای دیجیتال (اخبار، رسانه‌های اجتماعی، بازی‌ها، ایمیل‌ها) است. این درگیری مغز را فعال، هوشیار و در حال پردازش اطلاعات نگه می‌دارد. برای ذهنی که از قبل بیش‌فعال و مستعد افکار مزاحم و نشخوار فکری است، این تحریک ذهنی می‌تواند به راحتی چرخه‌های فکری جدید را تحریک کند یا مواد جدیدی برای نشخوار فکری فراهم آورد و آرام کردن ذهن و انتقال به خواب را تقریباً غیرممکن سازد. توصیه به اجتناب از صفحه‌های نمایش فقط در مورد نوردهی نیست؛ بلکه یک راهبرد حیاتی برای ایجاد یک "مسیر خروجی" ذهنی از بار شناختی روز است. این کار از ورود محرک‌های جدید جلوگیری می‌کند و به ذهن مضطرب اجازه می‌دهد تا به تدریج از فعالیت جدا شود و در نتیجه اتاق خواب را به عنوان یک "پناهگاه خواب" اختصاصی محافظت کرده و انتقال به حالت آرامش را تسهیل می‌کند.</p>
                    <p class="text-base text-right text-justify">همچنین، این اقدامات تداخل فیزیولوژیکی با خواب را به حداقل می‌رساند. توصیه‌ها شامل اجتناب از وعده‌های غذایی سنگیل، کافئین و الکل قبل از خواب است. کافئین یک محرک مستقیم است. وعده‌های غذایی سنگین انرژی را به سمت هضم هدیت می‌کنند و به طور بالقوه باعث ناراحتی می‌شوند. الکل، در حالی که در ابتدا آرام‌بخش است، ساختار خواب را در اواخر شب مختل می‌کند و منجر به بیداری می‌شود. این مواد مستقیماً در فرآیندهای طبیعی خواب بدن تداخل ایجاد می‌کنند و باعث تحریک فیزیولوژیکی، ناراحتی گوارشی یا خواب تکه‌تکه می‌شوند. این ناراحتی فیزیکی یا هوشیاری بالا می‌تواند به راحتی توسط یک ذهن مضطرب اشتباه تفسیر یا تشدید شود و به چرخه نگرانی و بی‌خوابی دامن بزند. برای فردی با OCD/نشخوار فکری، که ممکن است از قبل نسبت به احساسات درونی خود بسیار آگاه باشد، مدیریت رژیم غذایی و مصرف مواد قبل از خواب حیاتی است. هرگونه اختلال فیزیولوژیکی می‌تواند به یک تمرکز جدید برای افکار وسواسی تبدیل شود یا اضطراب‌های موجود را تشدید کند و به خواب رفتن و حفظ آن را دشوارتر سازد. این به معنای حذف "نویز" داخلی است که یک ذهن مضطرب ممکن است به آن چسبیده باشد.</p>
                `
            },
            {
                title: "بهینه‌سازی محیط خواب",
                content: `
                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">فضایی آرام، تاریک و خنک</h3>
                    <p class="mb-2 text-base text-right text-justify">اتاق خواب باید پناهگاهی برای خواب باشد و عاری از هرگونه حواس‌پرتی. اطمینان حاصل کنید که اتاق خواب آرام، تاریک، آرامش‌بخش و خنک است. حتی مقادیر کمی از نور از بیرون، اتاق‌های دیگر یا دستگاه‌های الکترونیکی می‌تواند خواب را مختل کند. از پرده‌های ضخیم، بستن در اتاق یا استفاده از ماسک خواب و گوش‌گیر برای جلوگیری از نور و صدا استفاده کنید. یک اتاق به‌هم‌ریخته نیز می‌تواند مانع تمرکز ذهن بر خواب شود، بنابراین سعی کنید فضای خود را مرتب و مینیمال نگه دارید.</p>
                    <p class="text-base text-right text-justify">این اقدامات یک "بافر حسی" در برابر نویزهای خارجی و داخلی ایجاد می‌کند. توصیه‌های ثابت برای یک محیط خواب تاریک، آرام، خنک و مرتب در منابع مختلف یافت می‌شود. افراد دارای OCD و نشخوار فکری اغلب نسبت به محرک‌های داخلی و خارجی بسیار حساس هستند. حواس‌پرسی‌های بیرونی (نور، صدا، بی‌نظمی بصری) می‌توانند به راحتی فرآیندهای فکری داخلی و اضطراب‌ها را تحریک یا تشدید کنند. به عنوان مثال، یک اتاق به‌هم‌ریخته می‌تواند به منبع "وسواس" مرتبط با نظم یا پاکیزگی تبدیل شود. با به حداقل رساندن دقیق ورودی‌های حسی خارجی (نور، صدا، بی‌نظمی بصری)، مغز محرک‌های کمتری برای پردازش دارد. این کار به ذهن کمک می‌کند تا به طور قابل توجهی از دنیای بیرون و، مهم‌تر از همه، از حلقه‌های فکری که نشخوار فکری و OCD را مشخص می‌کنند، جدا شود. این راهبرد فقط در مورد راحتی نیست؛ بلکه در مورد ایجاد یک فضای ذهنی کنترل‌شده و "امن" است. با کاهش محرک‌های خارجی بالقوه و بار حسی، محیطی فراهم می‌شود که ذهن مضطرب کمتر به چیزی چسبیده و در نتیجه انتقال از حالت بیش‌هوشیاری (رایج در OCD) به آرامش لازم برای خواب را تسهیل می‌کند.</p>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">دوری از وسایل الکترونیکی</h3>
                    <p class="mb-2 text-base text-right text-justify">این نکته آنقدر مهم است که باید به طور جداگانه بر آن تأکید شود. اتاق خواب باید صرفاً برای خواب (و صمیمیت) باشد. این یک قانون است که تمام دستگاه‌های الکترونیکی مانند تلویزیون، کامپیوتر و تلفن‌های هوشمند را از اتاق خواب خارج کنید. اگر از اتاق خواب خود برای کار، تماشای تلویزیون یا گشت و گذار با تلفن استفاده می‌کنید، مغز شما شروع به ارتباط آن فضا با بیداری و فعالیت می‌کند، نه خواب. هدف این است که مغز را شرطی کنید تا اتاق خواب را فضایی منحصراً برای استراحت بشناسد.</p>
                    <p class="text-base text-right text-justify">این کار به بازآموزی ارتباط مغز با اتاق خواب کمک می‌کند. توصیه واضح است: دستگاه‌های الکترونیکی را از اتاق خواب خارج کنید و اتاق خواب را منحصراً برای خواب استفاده کنید. مغز انسان در تشکیل ارتباطات بسیار ماهر است. اگر اتاق خواب به طور مداوم برای فعالیت‌های تحریک‌کننده مانند کار، سرگرمی، یا استفاده از تلفن که باعث اضطراب می‌شود (مانند چک کردن اخبار، رسانه‌های اجتماعی، یا درگیر شدن با محتوای تحریک‌کننده نشخوار فکری) استفاده شود، مغز برای ارتباط آن فضا با آرامش و خواب دچار مشکل خواهد شد. با محدود کردن شدید فعالیت‌های اتاق خواب به خواب، مغز به طور سیستماتیک آموزش می‌بیند تا هنگام ورود به آن محیط خاص، وارد حالت آماده خواب شود. این شکل از شرطی‌سازی کلاسیک می‌تواند تلاش ذهنی آگاهانه لازم برای به خواب رفتن را به طور قابل توجهی کاهش دهد، زیرا خود فضای فیزیکی به یک نشانه قدرتمند برای استراحت تبدیل می‌شود. برای فردی با OCD، که اغلب با الگوهای فکری سفت و سخت و ارتباطات مشکل‌ساز دست و پنجه نرم می‌کند، ایجاد یک ارتباط واضح، منحصر به فرد و مثبت برای اتاق خواب (فقط برای خواب) می‌تواند ابزاری بسیار قدرتمند باشد. این کار به شکستن چرخه آوردن نگرانی‌ها، فعالیت ذهنی و محرک‌های خارجی به فضای خواب کمک می‌کند و در نتیجه شروع خوابی پایدارتر و بدون مزاحمت را ترویج می‌دهد. این به معنای ایجاد یک "نشانه ذهنی" قوی برای خواب است.</p>
                `
            },
            {
                title: "راهکارهای مدیریت نشخوار فکری برای خواب آرام",
                content: `
                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">تکنیک "وقت نگرانی"</h3>
                    <p class="mb-2 text-base text-right text-justify">از آنجایی که نشخوار فکری یک مانع اصلی است، یک تکنیک قدرتمند، برنامه‌ریزی برای نگرانی‌ها است. به جای اینکه اجازه دهید نگرانی‌ها در زمان خواب به شما حمله کنند، یک زمان مشخص در طول روز را به آنها اختصاص دهید. یک یا دو دوره ۱۰ دقیقه‌ای در طول روز (مثلاً در بعدازظهر) را در نظر بگیرید که در آن *عمداً* روی افکار وسواسی یا منفی خود تمرکز کنید. در طول این "وقت نگرانی"، به خود اجازه دهید تا به طور کامل با این افکار درگیر شوید؛ نیازی به تلاش برای رفع آنها یا یافتن راه‌حل در آن لحظه نیست. هدف صرفاً اذعان و پردازش آنها در یک دوره زمانی محدود است. وقتی زمان به پایان رسید، چند نفس عمیق بکشید، آگاهانه آن افکار را رها کنید و به فعالیت‌های روزمره خود بازگردید. برای بقیه روز، و به ویژه قبل از خواب، اگر یک فکر نگران‌کننده به ذهن شما خطور کرد، به آرامی به خود یادآوری کنید: "من قبلاً وقت نگرانی خود را داشته‌ام، این موضوع را در جلسه برنامه‌ریزی شده بعدی بررسی خواهم کرد".</p>
                    <p class="text-base text-right text-justify">این تکنیک به فرد کمک می‌کند تا کنترل افکار مزاحم را به دست گیرد. افرادی که با OCD/نشخوار فکری دست و پنجه نرم می‌کنند، اغلب احساس می‌کنند که افکار مزاحم آنها را کنترل می‌کنند و غیرقابل کنترل هستند. تکنیک "وقت نگرانی" به صراحت شامل برنامه‌ریزی برای این افکار است. با *انتخاب* آگاهانه زمان و مکان درگیر شدن با نگرانی‌های خود، فرد کنترل و عاملیت را از افکار مزاحم پس می‌گیرد. این پویایی از یک دریافت‌کننده منفعل افکار به یک مدیر فعال چشم‌انداز ذهنی تغییر می‌کند. این به معنای سرکوب افکار نیست، که بی‌اثر است، بلکه به معنای مدیریت و مهار آنهاست. این تغییر، خودکارآمدی را تقویت می‌کند و به تدریج قدرت افکار وسواسی را کاهش می‌دهد، زیرا آنها دیگر به طور غیرمنتظره و خارج از کنترل ظاهر نمی‌شوند. این یک راهبرد رفتاری قدرتمند است که به فرد اجازه می‌دهد تا با وسواس‌های خود روبرو شود، اما به شیوه‌ای کنترل‌شده و ساختارمند.</p>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">به چالش کشیدن افکار منفی</h3>
                    <p class="text-base text-right text-justify">در طول "وقت نگرانی" خود، می‌توانید افکار منفی و مزاحم را به چالش بکشید. از خود بپرسید: "چه شواهدی برای درست بودن فکرم وجود دارد؟" "آیا روش مثبت‌تر یا واقع‌گرایانه‌تری برای بررسی موقعیت پیش رو وجود دارد؟" "چقدر احتمال وقوع رویدادی که از آن می‌ترسم وجود دارد؟" "آیا این فکر مفید است؟" و "به دوستی که چنین افکاری دارد، چه باید بگویم؟". این پرسش‌ها به شما کمک می‌کنند تا از چرخه نشخوار فکری فراتر رفته و به طور منطقی با افکارتان برخورد کنید.</p>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">ذهن‌آگاهی و حواس‌پرتی</h3>
                    <p class="text-base text-right text-justify">تمرینات ذهن‌آگاهی و تکنیک‌های آرام‌سازی مانند مدیتیشن و یوگا می‌توانند به مدیریت استرس و کاهش علائم وسواس فکری کمک کنند. ذهن‌آگاهی به شما کمک می‌کند تا بر لحظه حال تمرکز کنید و از درگیر شدن در افکار گذشته یا آینده که نشخوار فکری را تغذیه می‌کنند، جلوگیری کنید. هنگامی که خود را در یک حلقه تکراری از افکار می‌بینید، به دنبال فضایی آرام باشید، بنشینید، نفس عمیق بکشید و روی تنفس خود تمرکز کنید. همچنین، پرت کردن حواس از اتفاقات ناگوار، یک راهکار مؤثر برای توقف نشخوار ذهنی است. می‌توانید با مطالعه، تماشای تلویزیون (در زمان‌های مناسب) یا ورزش، حواس خود را پرت کنید.</p>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">تمرکز بر راه‌حل و اهداف واقع‌بینانه</h3>
                    <p class="text-base text-right text-justify">به جای تمرکز بر چرایی و چگونگی یک مشکل، تمرکز خود را بر یافتن راه‌حل بگذارید. اگر نشخوار فکری شما در مورد یک مشکل خاص است، یک قدم عملی برای رفع آن بردارید. برای مثال، اگر نگران اخراج شدن هستید، یک مهارت جدید یاد بگیرید. همچنین، تعیین اهداف غیرواقع‌بینانه و کمال‌گرایانه می‌تواند منجر به نشخوار فکری شود. انتظارات واقع‌بینانه از خود داشته باشید و به دنبال راه‌حل‌های ساده برای خوشحال کردن خود باشید.</p>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">پذیرش و شفقت به خود</h3>
                    <p class="text-base text-right text-justify">پذیرش بهترین روش برای مقابله با وسواس است. شخصیت خود و تمام نقص‌هایتان را بپذیرید؛ هیچ کس بی‌نقص نیست. این پذیرش به شما کمک می‌کند تا بهتر با خودتان مقابله کنید و خودتان را دست کم نگیرید. به خودتان بگویید که این کارها نجات‌بخش و مؤثر نیستند و به عقل و منطقتان پناه ببرید. همچنین، افزایش عزت نفس و آگاهی از توانایی‌ها و استعدادهای خود می‌تواند به کاهش علائم نشخوار ذهنی کمک کند.</p>
                `
            },
            {
                title: "تنظیم سبک زندگی برای بهبود کلی",
                content: `
                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">ورزش منظم</h3>
                    <p class="text-base text-right text-justify">ورزش یک درمان طبیعی و مؤثر برای اضطراب است. برای کسب بیشترین نتیجه مثبت، حداقل ۵ روز در هفته به مدت ۳۰ دقیقه یا بیشتر به فعالیت‌های هوازی بپردازید. ورزش می‌تواند به کاهش اضطراب و استرس کمک کند که اغلب محرک‌های اصلی وسواس هستند. همچنین، ورزش منظم کیفیت خواب را بهبود می‌بخشد و می‌تواند خستگی را کاهش دهد. حتی نیازی به تمرینات شدید یا روزانه نیست تا تأثیرگذار باشد.</p>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">رژیم غذایی سالم</h3>
                    <p class="text-base text-right text-justify">داشتن یک رژیم غذایی سالم و متعادل نقش مهمی در تقویت سلامت روان و بهبود کیفیت خواب دارد. مصرف مواد غذایی سرشار از ویتامین B12 و امگا ۳ (مانند ماهی چرب) توصیه می‌شود. همچنین، برخی غذاها مانند گردو، بادام، شیر، ماهی سالمون، بوقلمون، کاهو، موز و کیوی تأثیر مثبتی بر خواب دارند. نوشیدن شیر گرم قبل از خواب به دلیل وجود تریپتوفان که به تولید سروتونین و ملاتونین کمک می‌کند، مفید است. مصرف غذاهای غنی از منیزیم مانند تخم کدو نیز برای خوابیدن مفید است. سعی کنید شام خود را ۲ تا ۳ ساعت قبل از خواب میل کنید و از غذاهای سالم و سبک استفاده کنید. صبحانه را حذف نکنید، زیرا می‌تواند خستگی را کاهش داده و عملکرد ذهنی را تقویت کند.</p>

                    <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-2 text-right text-justify">جستجوی حمایت حرفه‌ای و اجتماعی</h3>
                    <p class="text-base text-right text-justify">اگر نشخوار فکری به شدت زیاد شده و با راهکارهای بالا قابل کنترل نیست، مراجعه به روانشناس یا روانپزشک ضروری است. درمان شناختی رفتاری (CBT) و مواجهه‌درمانی از روش‌های مؤثر در درمان OCD هستند. گفتگو درمانی و تحلیل وسواس‌ها مضر است و باید از آن اجتناب شود؛ راه خروج از چرخه وسواس فکری از طریق تغییر رفتار است. همچنین، پیوستن به انجمن حمایت از مبتلایان به OCD می‌تواند مفید باشد. صحبت کردن با یک دوست خوب که می‌تواند گوش دهد و راهنمایی کند، نیز یک انتخاب عالی است. پشتیبانی مداوم خانواده، دوستان و گروه‌های حمایتی، انگیزه افراد را در مسیر درمانی تقویت می‌کند.</p>
                `
            },
            {
                title: "نتیجه‌گیری و توصیه‌ها",
                content: `
                    <p class="mb-2 text-base text-right text-justify">مدیریت وسواس فکری-عملی و نشخوار فکری، به ویژه در ارتباط با تنظیم خواب، نیازمند یک رویکرد جامع و تدریجی است. این وضعیت یک چرخه خودتداوم‌بخش را ایجاد می‌کند که در آن افکار مزاحم و اضطراب ناشی از آنها، خواب را مختل کرده و کمبود خواب به نوبه خود نشخوار فکری و اضطراب را تشدید می‌کند.</p>
                    <p class="mb-2 text-base text-right text-justify">برای شکستن این چرخه و دستیابی به یک الگوی خواب پایدار و سالم، گام‌های عملی زیر توصیه می‌شود:</p>
                    <ol class="list-decimal list-inside space-y-1 text-right">
                        <li class="text-justify">**تنظیم تدریجی ساعت خواب:** تغییر زمان خواب و بیداری به صورت تدریجی (۱۵ تا ۳۰ دقیقه زودتر در هر چند روز) به بدن و ذهن اجازه می‌دهد تا بدون مقاومت شدید، سازگار شوند. این رویکرد به ویژه برای افراد دارای OCD، که ممکن است نسبت به تغییرات ناگهانی اضطراب بیشتری داشته باشند، مؤثر است.</li>
                        <li class="text-justify">**ثبات در برنامه خواب:** پایبندی به یک برنامه خواب ثابت، حتی در آخر هفته‌ها، برای تنظیم مجدد ریتم شبانه‌روزی بدن حیاتی است. این ثبات به عنوان یک لنگر بیولوژیکی عمل کرده و به بهبود تنظیم هیجانی و کاهش آسیب‌پذیری فیزیولوژیکی در برابر اضطراب کمک می‌کند.</li>
                        <li class="text-justify">**ایجاد روتین شبانه آرامش‌بخش:** انجام فعالیت‌های آرامش‌بخش مانند حمام آب گرم، مطالعه کتاب چاپی، گوش دادن به موسیقی آرام، مدیتیشن یا تمرینات تنفس عمیق قبل از خواب، به ذهن کمک می‌کند تا از چرخه‌های نشخوار فکری خارج شده و به حالت آرامش منتقل شود. این اقدامات به طور فعال فضای ذهنی را که نشخوار فکری معمولاً اشغال می‌کند، جایگزین می‌کنند.</li>
                        <li class="text-justify">**پرهیز از محرک‌ها و بهینه‌سازی محیط خواب:** حذف دستگاه‌های الکترونیکی از اتاق خواب، اجتناب از وعده‌های غذایی سنگیل، کافئین و الکل قبل از خواب، و ایجاد یک محیط خواب آرام، تاریک و خنک، به محافظت از "پناهگاه خواب" در برابر تحریکات شناختی و فیزیولوژیکی کمک می‌کند. این کار به مغز اجازه می‌دهد تا اتاق خواب را منحصراً با استراحت مرتبط بداند.</li>
                        <li class="text-justify">**مدیریت فعال نشخوار فکری:** استفاده از تکنیک "وقت نگرانی" برای اختصاص دادن زمان مشخصی در طول روز به افکار نگران‌کننده، به فرد کمک می‌کند تا کنترل افکار مزاحم را به دست گیرد. به چالش کشیدن افکار منفی، تمرین ذهن‌آگاهی و حواس‌پرتی‌های سازنده، و تمرکز بر راه‌حل‌ها و اهداف واقع‌بینانه نیز از راهکارهای مؤثر در کاهش نشخوار فکری هستند.</li>
                        <li class="text-justify">**پذیرش و شفقت به خود:** پذیرش واقعیت وسواس و نشخوار فکری، و تمرین شفقت به خود، گام‌های اساسی در مسیر بهبودی هستند. این پذیرش به شما کمک می‌کند تا با خود مهربان‌تر باشید و از سرزنش خود که نشخوار فکری را تغذیه می‌کند، جلوگیری کنید.</li>
                        <li class="text-justify">**سبک زندگی سالم:** ورزش منظم و رژیم غذایی متعادل، به طور کلی سلامت روان و کیفیت خواب را بهبود می‌بخشند.</li>
                        <li class="text-justify">**جستجوی حمایت حرفه‌ای:** در صورت شدت یافتن علائم، مراجعه به روانشناس یا روانپزشک برای دریافت درمان‌های تخصصی مانند CBT و مواجهه‌درمانی، و همچنین پیوستن به گروه‌های حمایتی، می‌تواند بسیار کمک‌کننده باشد.</li>
                    </ol>
                    <p class="mt-2 text-base text-right text-justify">با پیاده‌سازی تدریجی و مداوم این گام‌ها، فرد می‌تواند کنترل بیشتری بر افکار خود پیدا کرده، ریتم خواب خود را تنظیم کند و در نهایت کیفیت زندگی خود را به طور قابل توجهی بهبود بخشد. این مسیر نیازمند صبر، پیوستگی و تعهد است، اما نتایج آن در بهبود سلامت روان و جسمی بسیار ارزشمند خواهد بود.</p>
                `
            },
        ];

        // توابع کمکی DOM
        function $(selector) {
            return document.querySelector(selector);
        }

        function $$(selector) {
            return document.querySelectorAll(selector);
        }

        // --- مدیریت تم ---
        // تم اولیه همیشه بر اساس تم سیستم تنظیم می‌شود
        let currentTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';

        function applyTheme(theme) {
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
                $('#sun-icon').classList.add('hidden');
                $('#moon-icon').classList.remove('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                $('#sun-icon').classList.remove('hidden');
                $('#moon-icon').classList.add('hidden');
            }
            currentTheme = theme; // به روز رسانی وضعیت تم
        }

        // رویداد شنونده برای تغییر تم سیستم
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            applyTheme(e.matches ? 'dark' : 'light'); // همیشه از تم سیستم پیروی کن
        });

        // --- رندر اهداف سحرخیزی ---
        function renderMorningGoals() {
            const goalsList = $('#morning-goals-list');
            goalsList.innerHTML = ''; // پاک کردن لیست قبلی

            morningGoals.forEach(goal => {
                const listItem = document.createElement('li');
                listItem.className = `flex flex-row-reverse items-center p-3 rounded-md transition duration-200 cursor-pointer ${
                    goal.completed
                        ? 'bg-green-100 text-green-800 line-through dark:bg-green-900 dark:text-green-200'
                        : 'bg-white hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200'
                }`;
                listItem.dataset.id = goal.id; // برای شناسایی هدف هنگام کلیک

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = goal.completed;
                checkbox.className = 'form-checkbox h-5 w-5 text-blue-600 rounded-sm ml-3 dark:text-blue-400';
                checkbox.addEventListener('change', (event) => {
                    event.stopPropagation(); // جلوگیری از فعال شدن رویداد کلیک روی li
                    toggleGoalCompletion(goal.id);
                });

                const span = document.createElement('span');
                span.className = 'text-base flex-grow text-right text-justify'; /* تغییر اندازه متن لیست به base */
                span.textContent = goal.text;

                listItem.appendChild(checkbox);
                listItem.appendChild(span);
                goalsList.appendChild(listItem);

                // اضافه کردن رویداد کلیک به آیتم لیست (برای کلیک روی کل li)
                listItem.addEventListener('click', () => {
                    toggleGoalCompletion(goal.id);
                });
            });
            checkAllGoalsCompletedForToday(); // بررسی تکمیل اهداف پس از رندر
        }

        function toggleGoalCompletion(id) {
            const oldGoal = morningGoals.find(goal => goal.id === id);
            morningGoals = morningGoals.map(goal =>
                goal.id === id ? { ...goal, completed: !goal.completed } : goal
            );

            const newGoal = morningGoals.find(goal => goal.id === id);

            if (!oldGoal.completed && newGoal.completed) {
                // هدف تکمیل شد
                points += pointsPerGoal;
                newGoal.lastCompletionDate = new Date().toISOString().split('T')[0]; // ثبت تاریخ تکمیل
            } else if (oldGoal.completed && !newGoal.completed) {
                // هدف از حالت تکمیل خارج شد
                points = Math.max(0, points - pointsPerGoal); // امتیازات منفی نشود
                newGoal.lastCompletionDate = null; // تاریخ تکمیل را پاک کن
            }

            updateLevel();
            saveData(); // ذخیره در localStorage
            renderMorningGoals(); // رندر مجدد برای نمایش تغییرات
            renderGamificationStats(); // به روز رسانی آمار گیمیفیکیشن
        }

        // --- توابع گیمیفیکیشن ---
        function updateLevel() {
            let newLevel = 1;
            for (let i = 0; i < levelsConfig.length; i++) {
                if (points >= levelsConfig[i].xpNeeded) {
                    newLevel = levelsConfig[i].level;
                } else {
                    break;
                }
            }
            level = newLevel;
        }

        function renderGamificationStats() {
            $('#current-points').textContent = points;
            const currentLevelConfig = levelsConfig.find(l => l.level === level);
            $('#current-level').textContent = `${level} (${currentLevelConfig ? currentLevelConfig.name : 'نامشخص'})`; // Display level name
            $('#current-streak').textContent = streak;

            const nextLevelConfig = levelsConfig.find(l => l.level === level + 1);

            let xpForNextLevel = 0;
            let xpProgress = 0;

            if (nextLevelConfig) {
                xpForNextLevel = nextLevelConfig.xpNeeded - currentLevelConfig.xpNeeded;
                xpProgress = points - currentLevelConfig.xpNeeded;
                const progressPercentage = (xpProgress / xpForNextLevel) * 100;
                $('#progress-bar').style.width = `${progressPercentage}%`;
                $('#xp-progress-text').textContent = `${xpProgress}/${xpForNextLevel}`;
            } else {
                // اگر به حداکثر سطح رسیده‌ایم
                $('#progress-bar').style.width = '100%';
                $('#xp-progress-text').textContent = `حداکثر سطح!`;
            }
        }

        function checkAllGoalsCompletedForToday() {
            const today = new Date().toISOString().split('T')[0]; // تاریخ امروز به فرمت YYYY-MM-DD
            // شمارش تعداد اهداف تکمیل شده برای امروز
            const completedGoalsTodayCount = morningGoals.filter(goal => goal.completed && goal.lastCompletionDate === today).length;
            const acceptableCompletedGoals = 5; // تعداد اهداف لازم برای محاسبه استریک

            if (completedGoalsTodayCount >= acceptableCompletedGoals) {
                if (lastAllGoalsCompletionDate === null) {
                    // اولین بار که تعداد کافی از اهداف تکمیل شده‌اند
                    streak = 1;
                } else {
                    const lastDate = new Date(lastAllGoalsCompletionDate);
                    const todayDate = new Date(today);
                    const diffTime = Math.abs(todayDate - lastDate);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                    if (diffDays === 1) {
                        // اگر دیروز هم تعداد کافی از اهداف تکمیل شده بودند، استریک را افزایش بده
                        streak++;
                    } else if (diffDays > 1) {
                        // اگر بیش از یک روز گذشته، استریک را ریست کن
                        streak = 1;
                    }
                }
                lastAllGoalsCompletionDate = today;
            } else {
                // اگر تعداد کافی از اهداف امروز تکمیل نشده‌اند، بررسی کن که آیا باید استریک را ریست کرد
                if (lastAllGoalsCompletionDate !== null) {
                    const lastDate = new Date(lastAllGoalsCompletionDate);
                    const todayDate = new Date(today);
                    const diffTime = Math.abs(todayDate - lastDate);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                    // اگر آخرین تکمیل تعداد کافی از اهداف مربوط به دیروز نیست و امروز هم کامل نشده، استریک را صفر کن
                    if (diffDays > 1) {
                        streak = 0;
                        lastAllGoalsCompletionDate = null;
                    }
                }
            }
            saveData();
            renderGamificationStats();
        }


        // --- رندر نقل قول‌ها ---
        function renderQuotes() {
            const quotesGrid = $('#quotes-grid');
            quotesGrid.innerHTML = ''; // پاک کردن گرید قبلی

            quotes.forEach((quote, index) => {
                const quoteDiv = document.createElement('div');
                quoteDiv.className = 'bg-white p-4 rounded-lg border border-purple-200 transform hover:scale-105 transition duration-300 ease-in-out flex flex-row-reverse items-start dark:bg-gray-700 dark:border-purple-700 dark:text-gray-200';

                const span = document.createElement('span');
                span.className = 'text-xl md:text-2xl font-bold ml-3'; /* تغییر اندازه نقل قول به xl در موبایل */
                span.textContent = '“';

                const p = document.createElement('p');
                p.className = 'text-base md:text-lg text-gray-700 italic flex-grow text-right text-justify dark:text-gray-300'; /* تغییر اندازه متن نقل قول به base در موبایل */
                p.textContent = quote;

                quoteDiv.appendChild(span);
                quoteDiv.appendChild(p);
                quotesGrid.appendChild(quoteDiv);
            });
        }

        // --- رندر بخش‌های راهنما (آکاردئون) ---
        function renderGuideSections() {
            const guideContainer = $('#guide-sections-container');
            guideContainer.innerHTML = ''; // پاک کردن محتوای قبلی

            guideSections.forEach((section, index) => {
                const accordionDiv = document.createElement('div');
                accordionDiv.className = 'border border-gray-200 rounded-lg overflow-hidden mb-4 dark:border-gray-700';

                const button = document.createElement('button');
                button.className = 'flex justify-between items-center w-full p-4 text-base md:text-lg font-semibold text-right text-gray-700 bg-gray-50 hover:bg-gray-100 focus:outline-none focus-visible:ring focus-visible:ring-purple-500 focus-visible:ring-opacity-75 rounded-t-lg dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700'; /* تغییر اندازه متن دکمه آکاردئون */
                button.innerHTML = `
                    <span class="text-justify">${section.title}</span>
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-chevron-down w-5 h-5 text-purple-500 transition-transform duration-200"
                    >
                        <path d="m6 9 6 6 6-6" />
                    </svg>
                `;

                const contentDiv = document.createElement('div');
                contentDiv.className = 'accordion-content';
                // محتوای راهنما به صورت HTML خام است، بنابراین از innerHTML استفاده می‌کنیم
                // اطمینان از اعمال text-justify به محتوای داخلی HTML
                contentDiv.innerHTML = `<div class="p-4 bg-white text-base md:text-lg text-gray-700 leading-relaxed dark:bg-gray-900 dark:text-gray-300">${section.content.replace(/<p class="/g, '<p class="text-justify ')}</div>`; /* تغییر اندازه متن محتوا به base در موبایل */

                button.addEventListener('click', () => {
                    const chevronIcon = button.querySelector('svg');
                    if (contentDiv.classList.contains('open')) {
                        contentDiv.classList.remove('open');
                        chevronIcon.classList.remove('transform', 'rotate-180');
                    } else {
                        // بستن بقیه آکاردئون‌ها
                        $$('.accordion-content.open').forEach(openContent => {
                            openContent.classList.remove('open');
                            openContent.previousElementSibling.querySelector('svg').classList.remove('transform', 'rotate-180');
                        });
                        contentDiv.classList.add('open');
                        chevronIcon.classList.add('transform', 'rotate-180');
                    }
                });

                accordionDiv.appendChild(button);
                accordionDiv.appendChild(contentDiv);
                guideContainer.appendChild(accordionDiv);
            });
        }

        // --- بارگذاری و ذخیره داده‌ها ---
        function loadData() {
            const savedSleepSetting = localStorage.getItem('sleepSetting');
            if (savedSleepSetting) {
                sleepSetting = savedSleepSetting;
                $('#sleepSetting').value = sleepSetting;
            } else {
                sleepSetting = '';
                $('#sleepSetting').value = sleepSetting;
            }

            const savedGoals = localStorage.getItem('morningGoals');
            if (savedGoals) {
                morningGoals = JSON.parse(savedGoals);
            }

            const savedPoints = localStorage.getItem('points');
            if (savedPoints) {
                points = parseInt(savedPoints);
            }

            const savedLevel = localStorage.getItem('level');
            if (savedLevel) {
                level = parseInt(savedLevel);
            }

            const savedStreak = localStorage.getItem('streak');
            if (savedStreak) {
                streak = parseInt(savedStreak);
            }

            const savedLastAllGoalsCompletionDate = localStorage.getItem('lastAllGoalsCompletionDate');
            if (savedLastAllGoalsCompletionDate) {
                lastAllGoalsCompletionDate = savedLastAllGoalsCompletionDate;
            }
        }

        function saveData() {
            localStorage.setItem('sleepSetting', $('#sleepSetting').value);
            localStorage.setItem('morningGoals', JSON.stringify(morningGoals));
            localStorage.setItem('points', points);
            localStorage.setItem('level', level);
            localStorage.setItem('streak', streak);
            localStorage.setItem('lastAllGoalsCompletionDate', lastAllGoalsCompletionDate);
        }

        // --- مقداردهی اولیه برنامه ---
        document.addEventListener('DOMContentLoaded', () => {
            loadData(); // بارگذاری داده‌ها
            applyTheme(currentTheme); // اعمال تم اولیه

            // بررسی استریک در ابتدای هر روز
            const today = new Date().toISOString().split('T')[0];
            if (lastAllGoalsCompletionDate !== today) {
                // اگر آخرین تاریخ تکمیل اهداف مربوط به امروز نیست، استریک را بررسی کن
                checkAllGoalsCompletedForToday();
            }

            renderMorningGoals(); // رندر اهداف (که شامل checkAllGoalsCompletedForToday هم می‌شود)
            renderQuotes(); // رندر نقل قول‌ها
            renderGuideSections(); // رندر بخش‌های راهنما
            renderGamificationStats(); // رندر آمار گیمیفیکیشن

            // رویداد شنونده برای تغییر فیلد تنظیم خواب
            $('#sleepSetting').addEventListener('input', saveData);

            // --- Modal Logic ---
            const threeDotMenuToggle = $('#three-dot-menu-toggle');
            const threeDotMenuModal = $('#three-dot-menu-modal');
            const closeThreeDotMenu = $('#close-three-dot-menu');
            const showGamificationRules = $('#show-gamification-rules');
            const gamificationRulesModal = $('#gamification-rules-modal');
            const closeGamificationRules = $('#close-gamification-rules');
            const showResetConfirmation = $('#show-reset-confirmation');
            const resetConfirmationModal = $('#reset-confirmation-modal');
            const closeResetConfirmation = $('#close-reset-confirmation');
            const confirmResetButton = $('#confirm-reset');
            const cancelResetButton = $('#cancel-reset');
            const confirmationInput = $('#confirmation-input');
            const resetErrorMessage = $('#reset-error-message');

            // Open/Close Three-dot Menu
            threeDotMenuToggle.addEventListener('click', () => {
                threeDotMenuModal.classList.add('open');
            });

            closeThreeDotMenu.addEventListener('click', () => {
                threeDotMenuModal.classList.remove('open');
            });

            // Open Gamification Rules
            showGamificationRules.addEventListener('click', () => {
                threeDotMenuModal.classList.remove('open');
                gamificationRulesModal.classList.add('open');
            });

            closeGamificationRules.addEventListener('click', () => {
                gamificationRulesModal.classList.remove('open');
            });

            // Open Reset Confirmation
            showResetConfirmation.addEventListener('click', () => {
                threeDotMenuModal.classList.remove('open');
                resetConfirmationModal.classList.add('open');
                confirmationInput.value = ''; // Clear input on open
                resetErrorMessage.classList.add('hidden'); // Hide error message
            });

            closeResetConfirmation.addEventListener('click', () => {
                resetConfirmationModal.classList.remove('open');
            });

            cancelResetButton.addEventListener('click', () => {
                resetConfirmationModal.classList.remove('open');
            });

            confirmResetButton.addEventListener('click', () => {
                const confirmationText = confirmationInput.value;
                if (confirmationText === 'تأیید' || confirmationText === 'تایید') { // Accept both spellings
                    localStorage.clear(); // Clear all local storage data
                    location.reload(); // Reload the page
                } else {
                    resetErrorMessage.classList.remove('hidden'); // Show error message
                }
            });
        });
    </script>
</body>
</html>
